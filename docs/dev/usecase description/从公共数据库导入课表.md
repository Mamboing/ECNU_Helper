# 从公共数据库导入课表

## 概述

此用例描述用户如何将课程表从公共数据库导入本软件。

## 主要事件流

1. 此用例始于用户欲从公共数据库导入课表时。
2. 系统从本地数据库获取用户账号与密码。
3. 系统从ECNU统一身份认证平台获取验证码图片。
4. 系统识别验证码内容。
5. 系统登录公共数据库。
6. 系统获取并解析课表数据，然后展示给用户。
7. 用户确定要导入的课表内容无误。
8. 系统将课表数据存入本地数据库。
9. 用例结束。

## 备选事件流

**2a.** 本地数据库未保存用户账号与密码。<br>
**2b**. 系统要求用户录入账号与密码。<br>
**2c**. 若用户拒绝录入则用例结束，否则转至**2.**。<br>

**3a.** 未能获取验证码图片。<br>
**3b.** 提醒用户检查网络状态与ECNU网站状态，用例结束。<br>

**4a.** 未能识别验证码内容。<br>
**4b.** 系统要求用户人工识别并输入验证码内容，然后转至**5.**。<br>

**5a.** 未能登录公共数据库。<br>
**5b.** 提醒用户检查账号与密码，用例结束。<br>

**6a.** 未能获取课表数据。<br>
**6b.** 提醒用户检查公共数据库是否存在课表数据，用例结束。<br>

**7a.** 用户取消导入，用例结束。<br>

**8a.** 本地数据库中已存在同一学期的课表数据。<br>
**8b.** 系统对比差异，若完全相同则用例结束，否则至**8c.**。<br>
**8c.** 用户选择要保留的版本。<br>
**8d.** 若用户选择保留旧版本则用例结束，否则转至**8.**，并不再进入此备选事件流。<br>

## 前置条件

无。

## 后置条件

若主要事件流正常结束，则本地数据库中现在存在和公共数据库一致的数据，否则无事发生。
